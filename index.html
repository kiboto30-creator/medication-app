<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ú–µ–¥–∏–∫–∞–º–µ–Ω—Ç–æ–≤</title>
    <style>
        :root {
            --color-primary: #2196F3;
            --color-success: #4CAF50;
            --color-error: #f44336;
            --color-bg: #f5f5f5;
            --color-surface: #ffffff;
            --color-text: #212121;
            --color-text-secondary: #757575;
            --color-border: #e0e0e0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            padding: 16px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .header {
            background: var(--color-primary);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 24px;
            text-align: center;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 12px;
            opacity: 0.9;
        }

        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 24px;
            background: var(--color-surface);
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .day-header {
            text-align: center;
            font-size: 12px;
            font-weight: 600;
            color: var(--color-text-secondary);
            padding: 8px 0;
            text-transform: uppercase;
        }

        .day-cell {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
            position: relative;
            background: var(--color-bg);
            font-size: 14px;
            font-weight: 500;
        }

        .day-cell.other-month {
            opacity: 0.4;
            cursor: default;
        }

        .day-cell:not(.other-month):hover {
            transform: scale(1.05);
        }

        .day-cell.success {
            background: var(--color-success);
            color: white;
        }

        .day-cell.error {
            background: var(--color-error);
            color: white;
        }

        .day-cell.selected {
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        .medications {
            background: var(--color-surface);
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .medications h2 {
            font-size: 14px;
            color: var(--color-text-secondary);
            text-transform: uppercase;
            margin-bottom: 12px;
        }

        .med-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin-bottom: 8px;
            background: var(--color-bg);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .med-item:last-child {
            margin-bottom: 0;
        }

        .med-item:hover {
            background: #e8e8e8;
        }

        .med-item.taken {
            background: rgba(76, 175, 80, 0.1);
        }

        .med-checkbox {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid var(--color-border);
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }

        .med-item.taken .med-checkbox {
            background: var(--color-success);
            border-color: var(--color-success);
            color: white;
        }

        .med-name {
            font-weight: 500;
            flex: 1;
        }

        .med-time {
            font-size: 12px;
            color: var(--color-text-secondary);
        }

        .comments-section {
            background: var(--color-surface);
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .comments-section h2 {
            font-size: 14px;
            color: var(--color-text-secondary);
            text-transform: uppercase;
            margin-bottom: 12px;
        }

        .comment-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            resize: none;
            transition: border-color 0.2s ease;
        }

        .comment-input:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .comment-hint {
            font-size: 12px;
            color: var(--color-text-secondary);
            margin-top: 8px;
        }

        .month-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            background: var(--color-surface);
            padding: 12px 16px;
            border-radius: 12px;
        }

        .month-nav button {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s ease;
        }

        .month-nav button:hover {
            background: #1976D2;
        }

        .month-nav h3 {
            font-size: 16px;
            font-weight: 600;
        }

        .notification-banner {
            background: var(--color-primary);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 13px;
            text-align: center;
        }

        .settings-section {
            background: var(--color-surface);
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .settings-section h2 {
            font-size: 14px;
            color: var(--color-text-secondary);
            text-transform: uppercase;
            margin-bottom: 12px;
        }

        .sync-button {
            background: var(--color-success);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            width: 100%;
            margin-bottom: 8px;
        }

        .sync-button:hover {
            background: #45a049;
        }

        .sync-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .sync-status {
            font-size: 12px;
            color: var(--color-text-secondary);
            text-align: center;
            margin-top: 8px;
        }

        .webhook-input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            font-size: 12px;
            font-family: monospace;
            margin-bottom: 8px;
            transition: border-color 0.2s ease;
            background-color: #f0f0f0;
            color: #666;
        }

        .webhook-hint {
            font-size: 11px;
            color: var(--color-text-secondary);
            margin-bottom: 12px;
        }

        .webhook-hint a {
            color: var(--color-primary);
            cursor: pointer;
            text-decoration: underline;
        }

        .notification-settings {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }

        .toggle-switch {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .toggle-checkbox {
            width: 44px;
            height: 24px;
            background: #ccc;
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: background 0.2s ease;
            border: none;
            padding: 0;
        }

        .toggle-checkbox.active {
            background: var(--color-success);
        }

        .toggle-checkbox::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: left 0.2s ease;
        }

        .toggle-checkbox.active::after {
            left: 22px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üíä –ú–µ–¥–∏–∫–∞–º–µ–Ω—Ç—ã</h1>
            <p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –ø—Ä–∏—ë–º–∞ –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤</p>
        </div>

        <div class="notification-banner" id="notificationBanner" style="display: none;"></div>

        <div class="month-nav">
            <button onclick="previousMonth()">‚Üê –ù–∞–∑–∞–¥</button>
            <h3 id="monthYear"></h3>
            <button onclick="nextMonth()">–í–ø–µ—Ä–µ–¥ ‚Üí</button>
        </div>

        <div class="calendar" id="calendar"></div>

        <div class="medications">
            <h2>üìã –ü—Ä–µ–ø–∞—Ä–∞—Ç—ã –Ω–∞ <span id="selectedDate"></span></h2>
            <div id="medicationsList"></div>
        </div>

        <div class="comments-section">
            <h2>üìù –ó–∞–º–µ—Ç–∫–∞</h2>
            <textarea 
                class="comment-input" 
                id="commentInput" 
                maxlength="50"
                placeholder="–í–∞—à–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ..."
                rows="3"></textarea>
            <div class="comment-hint" id="commentHint">0 / 50 —Å–∏–º–≤–æ–ª–æ–≤</div>
        </div>

        <div class="settings-section">
            <h2>‚öôÔ∏è –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
            <div class="notification-settings">
                <label class="toggle-switch">
                    <input type="checkbox" id="notificationToggle" checked>
                    <button class="toggle-checkbox active" id="toggleButton"></button>
                    <span>–í–∫–ª—é—á–µ–Ω—ã</span>
                </label>
            </div>
            <p style="font-size: 12px; color: var(--color-text-secondary); margin: 0;">
                üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ 07:30 –∏ 21:00 (—Ç—Ä–µ–±—É–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞)
            </p>
        </div>

        <div class="settings-section">
            <h2>‚òÅÔ∏è Google Sheets —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h2>
            <div class="webhook-hint">
                üìã –£–∫–∞–∂–∏—Ç–µ URL –≤–µ–±—Ö—É–∫–∞ Apps Script –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö. <a onclick="showGoogleSheetsInstructions()">–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å?</a>
            </div>
            <input 
                type="text" 
                class="webhook-input" 
                id="webhookUrl" 
                placeholder="https://script.google.com/macros/d/..."
                disabled
            >
            <button class="sync-button" onclick="editWebhookUrl()" style="margin-bottom: 4px;">
                ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å URL
            </button>
            <button class="sync-button" id="syncButton" onclick="syncToGoogleSheets()">
                üì§ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
            </button>
            <div class="sync-status" id="syncStatus"></div>
        </div>
    </div>

    <script>
        // Data storage
        const medications = [
            { id: 1, name: '–ü—Ä–µ–ø–∞—Ä–∞—Ç A', time: '09:00' },
            { id: 2, name: '–ü—Ä–µ–ø–∞—Ä–∞—Ç B', time: '09:00' }
        ];

        let currentDate = new Date();
        let selectedDate = new Date();
        let data = loadData();
        let notificationsEnabled = localStorage.getItem('notificationsEnabled') !== 'false';
        let webhookUrl = localStorage.getItem('webhookUrl') || '';

        // Initialize
        function init() {
            renderCalendar();
            renderMedications();
            setupNotifications();
            setupCommentListener();
            checkDailyReminder();
            setupServiceWorker();
            loadSettings();
            scheduleNotifications();
        }

        // Load data from localStorage
        function loadData() {
            const stored = localStorage.getItem('medicationData');
            return stored ? JSON.parse(stored) : {};
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('medicationData', JSON.stringify(data));
        }

        // Get date key (YYYY-MM-DD)
        function getDateKey(date) {
            return date.toISOString().split('T')[0];
        }

        // Render calendar
        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            document.getElementById('monthYear').textContent = 
                new Date(year, month).toLocaleDateString('ru-RU', { month: 'long', year: 'numeric' });

        let firstDay = new Date(year, month, 1).getDay();
        firstDay = (firstDay === 0) ? 6 : firstDay - 1; // Adjust for Monday start            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const daysInPrevMonth = new Date(year, month, 0).getDate();

            const calendar = document.getElementById('calendar');
            calendar.innerHTML = '';

            // Day headers
            const dayHeaders = ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'];
            dayHeaders.forEach(day => {
                const header = document.createElement('div');
                header.className = 'day-header';
                header.textContent = day;
                calendar.appendChild(header);
            });

            // Previous month days
            for (let i = firstDay - 1; i >= 0; i--) {
                const cell = createDayCell(daysInPrevMonth - i, true);
                calendar.appendChild(cell);
            }

            // Current month days
            for (let day = 1; day <= daysInMonth; day++) {
                const cell = createDayCell(day, false);
                calendar.appendChild(cell);
            }

            // Next month days
            const totalCells = calendar.children.length - 7;
            const remainingCells = 42 - totalCells;
            for (let day = 1; day <= remainingCells; day++) {
                const cell = createDayCell(day, true);
                calendar.appendChild(cell);
            }
        }

        // Create day cell
        function createDayCell(day, isOtherMonth) {
            const cell = document.createElement('div');
            const date = isOtherMonth 
                ? new Date()
                : new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
            
            if (isOtherMonth) {
                cell.className = 'day-cell other-month';
            } else {
                const dateKey = getDateKey(date);
                const dayData = data[dateKey] || {};
                
                cell.textContent = day;
                cell.className = 'day-cell';
                
                const allTaken = medications.every(med => dayData[med.id]);
                const someTaken = medications.some(med => dayData[med.id]);
                
                if (allTaken) {
                    cell.classList.add('success');
                } else if (someTaken) {
                    cell.classList.add('error');
                }

                if (getDateKey(selectedDate) === dateKey) {
                    cell.classList.add('selected');
                }

                cell.onclick = () => selectDate(date);
            }

            return cell;
        }

        // Select date
        function selectDate(date) {
            selectedDate = new Date(date);
            renderCalendar();
            renderMedications();
        }

        // Render medications for selected date
        function renderMedications() {
            const dateKey = getDateKey(selectedDate);
            const dayData = data[dateKey] || {};

            document.getElementById('selectedDate').textContent = 
                selectedDate.toLocaleDateString('ru-RU', { day: 'numeric', month: 'long' });

            const list = document.getElementById('medicationsList');
            list.innerHTML = '';

            medications.forEach(med => {
                const taken = dayData[med.id] || false;
                const item = document.createElement('div');
                item.className = `med-item ${taken ? 'taken' : ''}`;
                item.innerHTML = `
                    <div class="med-checkbox">${taken ? '‚úì' : ''}</div>
                    <div>
                        <div class="med-name">${med.name}</div>
                        <div class="med-time">‚è∞ ${med.time}</div>
                    </div>
                `;
                item.onclick = () => toggleMedication(med.id, dateKey);
                list.appendChild(item);
            });

            loadComment(dateKey);
        }

        // Toggle medication
        function toggleMedication(medId, dateKey) {
            if (!data[dateKey]) {
                data[dateKey] = {};
            }
            data[dateKey][medId] = !data[dateKey][medId];
            saveData();
            renderCalendar();
            renderMedications();
                
    // Auto-sync to Google Sheets after toggling medication
    if (webhookUrl && dateKey === getDateKey(new Date())) {
        syncToGoogleSheets().catch(err => console.error('Auto-sync failed:', err));
    }
        }

        // Setup comment listener
        function setupCommentListener() {
            const input = document.getElementById('commentInput');
            input.addEventListener('input', (e) => {
                const text = e.target.value;
                const hint = document.getElementById('commentHint');
                hint.textContent = `${text.length} / 50 —Å–∏–º–≤–æ–ª–æ–≤`;
                
                const dateKey = getDateKey(selectedDate);
                if (!data[dateKey]) {
                    data[dateKey] = {};
                }
                data[dateKey].comment = text;
                saveData();
                        
        // Auto-sync to Google Sheets after saving comment
        if (webhookUrl && dateKey === getDateKey(new Date())) {
            syncToGoogleSheets().catch(err => console.error('Auto-sync failed:', err));
        }
            });
        }

        // Load comment
        function loadComment(dateKey) {
            const input = document.getElementById('commentInput');
            const comment = data[dateKey]?.comment || '';
            input.value = comment;
            document.getElementById('commentHint').textContent = `${comment.length} / 50 —Å–∏–º–≤–æ–ª–æ–≤`;
        }

        // Month navigation
        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }

        // Setup notifications
        function setupNotifications() {
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
        }

        // Setup Service Worker
        function setupServiceWorker() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('data:application/javascript,' + encodeURIComponent(`
self.addEventListener('install', (event) => {
  self.skipWaiting();
});

self.addEventListener('activate', (event) => {
  event.waitUntil(clients.claim());
});

self.addEventListener('message', (event) => {
  if (event.data && event.data.type === 'SEND_NOTIFICATION') {
    self.registration.showNotification('üíä –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–∞—Ö', {
      body: event.data.body,
      icon: 'üíä',
      badge: 'üíä',
      tag: 'medication-reminder',
      requireInteraction: true
    });
  }
});
                `)).catch(() => {});
            }
        }

        // Schedule notifications for 07:30 and 21:00
        function scheduleNotifications() {
            setInterval(() => {
                if (!notificationsEnabled || Notification.permission !== 'granted') return;

                const now = new Date();
                const hours = now.getHours();
                const minutes = now.getMinutes();

                if ((hours === 7 && minutes === 30) || (hours === 21 && minutes === 0)) {
                    const today = getDateKey(new Date());
                    const todayData = data[today] || {};
                    const allTaken = medications.every(med => todayData[med.id]);

                    if (!allTaken) {
                        const time = hours === 7 ? '—É—Ç—Ä–æ' : '–≤–µ—á–µ—Ä';
                        if (navigator.serviceWorker && navigator.serviceWorker.controller) {
                            navigator.serviceWorker.controller.postMessage({
                                type: 'SEND_NOTIFICATION',
                                body: `–í—Ä–µ–º—è –ø—Ä–∏—ë–º–∞ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–æ–≤ (${time})`
                            });
                        }
                    }
                }
            }, 60000);
        }

        // Check morning reminder on app load
        function checkDailyReminder() {
            const now = new Date();
            const hours = now.getHours();
            const today = getDateKey(new Date());

            if (hours >= 7 && hours < 10) {
                const todayData = data[today] || {};
                const allTaken = medications.every(med => todayData[med.id]);
                
                if (!allTaken) {
                    const banner = document.getElementById('notificationBanner');
                    banner.textContent = 'üåÖ –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–º–µ—Ç—å—Ç–µ –ø—Ä–∏—ë–º –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–æ–≤.';
                    banner.style.display = 'block';
                }
            }
        }

        // Load settings from localStorage
        function loadSettings() {
            const toggle = document.getElementById('notificationToggle');
            const button = document.getElementById('toggleButton');
            const webhookInput = document.getElementById('webhookUrl');

            toggle.checked = notificationsEnabled;
            button.classList.toggle('active', notificationsEnabled);
            webhookInput.value = webhookUrl;

            toggle.addEventListener('change', (e) => {
                notificationsEnabled = e.target.checked;
                localStorage.setItem('notificationsEnabled', notificationsEnabled);
                button.classList.toggle('active', notificationsEnabled);
                if (notificationsEnabled && Notification.permission === 'default') {
                    Notification.requestPermission();
                }
            });

            webhookInput.addEventListener('change', (e) => {
                webhookUrl = e.target.value;
                localStorage.setItem('webhookUrl', webhookUrl);
            });
        }

        // Edit webhook URL
        function editWebhookUrl() {
            const newUrl = prompt('–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω—ã–π URL –≤–µ–±—Ö—É–∫–∞:\n\n–ü—Ä–∏–º–µ—Ä:\nhttps://script.google.com/macros/d/YOUR-SCRIPT-ID/usercontent', webhookUrl);
            
            if (newUrl) {
                webhookUrl = newUrl;
                localStorage.setItem('webhookUrl', webhookUrl);
                document.getElementById('webhookUrl').value = webhookUrl;
                showSyncStatus('‚úÖ URL –æ–±–Ω–æ–≤–ª—ë–Ω', 2000);
            }
        }

        // Sync to Google Sheets
        async function syncToGoogleSheets() {
            if (!webhookUrl) {
                showSyncStatus('‚ùå –£–∫–∞–∂–∏—Ç–µ URL –≤–µ–±—Ö—É–∫–∞', 3000);
                return;
            }

            const button = document.getElementById('syncButton');
            button.disabled = true;
            showSyncStatus('‚è≥ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è...');

            try {
                const today = getDateKey(new Date());
                const todayData = data[today] || {};

                const payload = {
                    date: today,
                    med1: !!todayData[1],
                    med2: !!todayData[2],
                    comment: todayData.comment || ''
                };

                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                
                if (result.status === 'success') {
                    showSyncStatus('‚úÖ –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã', 3000);
                } else {
                    showSyncStatus('‚ùå –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏', 3000);
                }
            } catch (error) {
                showSyncStatus('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è', 3000);
                console.error('Sync error:', error);
            } finally {
                button.disabled = false;
            }
        }

        // Show sync status message
        function showSyncStatus(message, duration = 0) {
            const status = document.getElementById('syncStatus');
            status.textContent = message;
            if (duration) {
                setTimeout(() => {
                    status.textContent = '';
                }, duration);
            }
        }

        // Show Google Sheets instructions
        function showGoogleSheetsInstructions() {
            alert(`
üìã –ö–ê–ö –ù–ê–°–¢–†–û–ò–¢–¨ GOOGLE SHEETS –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Æ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Google Sheets (—Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é)
2. –ù–∞–∂–º–∏—Ç–µ "–†–∞—Å—à–∏—Ä–µ–Ω–∏—è" ‚Üí "Apps Script"
3. –£–¥–∞–ª–∏—Ç–µ –≤–µ—Å—å –∫–æ–¥ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ:

function doPost(e) {
  try {
    const sheet = SpreadsheetApp.getActiveSheet();
    const data = JSON.parse(e.postData.contents);
    sheet.appendRow([
      data.date,
      data.med1 ? '‚úÖ' : '‚ùå',
      data.med2 ? '‚úÖ' : '‚ùå',
      data.comment
    ]);
    return ContentService.createTextOutput(JSON.stringify({ status: 'success' }))
      .setMimeType(ContentService.MimeType.JSON);
  } catch (error) {
    return ContentService.createTextOutput(JSON.stringify({ status: 'error' }))
      .setMimeType(ContentService.MimeType.JSON);
  }
}

4. –ù–∞–∂–º–∏—Ç–µ "Deploy" ‚Üí "New deployment"
5. –í—ã–±–µ—Ä–∏—Ç–µ "Web app", Execute as –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç, Who has access "Anyone"
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL (https://script.google.com/...)
7. –ù–∞–∂–º–∏—Ç–µ "‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å URL" –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ URL
8. –ì–æ—Ç–æ–≤–æ! üéâ
            `);
        }

        // Start app
        init();
    </script>
</body>
</html>
